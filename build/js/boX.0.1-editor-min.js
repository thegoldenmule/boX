(function(c){var b=function(){var d=this;d.canvas=null;d.context=null;d._animationCurve=new AnimationCurve();d._animationCurve.addKey(new AnimationCurveKey(0,0));d._animationCurve.addKey(new AnimationCurveKey(1,1));return d};b.prototype={constructor:b,initialize:function(d){this.canvas=d;this.context=this.canvas.getContext("2d")},edit:function(d){this._animationCurve=d;this.redraw()},redraw:function(){if(!this._animationCurve||this._animationCurve.getKeys().length<2||!this.context||!this.canvas){return}this.context.fillStyle="#CCCCCC";this.context.fillRect(0,0,this.canvas.width,this.canvas.height);this.context.fill();this.context.beginPath();var j=4;for(var f=0,g=this.canvas.width/j;f<g;f++){this.context.moveTo(f*g,0);this.context.lineTo(f*g,this.canvas.height);for(var l=0,e=this.canvas.height/j;l<e;l++){this.context.moveTo(0,l*e);this.context.lineTo(this.canvas.width,l*e)}}this.context.lineWidth=1;this.context.strokeStyle="#999999";this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(0,this._animationCurve.evaluate(0)*this.canvas.height);var k=this._animationCurve.getKeys();for(var h=0,d=k.length;h<d-1;h++){a(this.canvas,this.context,this._animationCurve,k[h],k[h+1])}this.context.lineWidth=1;this.context.lineCap="round";this.context.lineJoin="round";this.context.strokeStyle="#DD0000";this.context.stroke();this.context.closePath()}};function a(k,h,l,u,s){var g=s.time-u.time;var m=16;for(var p=0;p<1;p+=1/m){var q=u.time+p*g;var f=u.time+(p+1/m)*g;var e=l.evaluate(q);var n=l.evaluate(f);var d=Math.sqrt((s.time-u.time)*(s.time-u.time)+(n-e)*(n-e));var v=f-q;for(var o=0;o<d;o++){var t=q+o*v;var r=l.evaluate(t);h.lineTo(t*k.width,r*k.height)}}h.lineTo(s.time*k.width,s.value*k.height)}c.AnimationCurveEditor=b})(this);